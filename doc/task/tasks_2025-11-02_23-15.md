# tasks_2025-11-02_23-15.md
üìÖ Generado: **2025-11-02 23:15**  
üîó Relacionado con: `CAMBIOS_Y_NOTAS.md` y `CHANGES-2025-11-02.md`

---

## 1. [ADMIN-API] Verificar POST remoto opcional (/api/sales) (asocia: T7.1, T8)
**Objetivo:** Asegurar que cuando exista `SKATERSHOP_SALES_URL_POST`, el admin reenv√≠e la venta al backend real SIN bloquear la respuesta al panel.  
**Archivos:**  
- `/app/api/sales/route.ts`  
- `.env.local`  

**Checklist:**
- [ ] Probar POST con solo memoria (sin .env) ‚Üí debe guardar en memoria.
- [ ] Probar POST con `SKATERSHOP_SALES_URL=http://localhost:4000/mock-sales` ‚Üí debe reenviar sin error.
- [ ] Probar POST con backend ca√≠do ‚Üí debe **NO** romper el admin (solo warn en consola).
- [ ] Documentar en `CAMBIOS_Y_NOTAS.md` el resultado de la prueba.

**Notas:**  
- Se hace `fetch(...)` asincr√≥nico, sin `await`, para que el admin responda r√°pido.
- Si el remoto cae, se espera ver en logs:  
  `[/api/sales] no se pudo reenviar venta al backend remoto: ...`

---

## 2. [ADMIN-UI] Validar visualizaci√≥n de backend en settings (asocia: T7.2)
**Objetivo:** Que en `/admin/settings` se vean las 3 URLs (productos, ventas GET, ventas POST) cuando est√©n configuradas en el server.  
**Archivos:**  
- `/app/admin/settings/page.tsx`  
- `/app/api/admin/source/route.ts`  

**Checklist:**
- [ ] Con `.env.local` vac√≠o ‚Üí debe decir ‚Äúno configurado‚Äù.
- [ ] Con `SKATERSHOP_PRODUCTS_URL=...` ‚Üí debe verse la URL.
- [ ] Con `SKATERSHOP_SALES_URL=...` ‚Üí debe verse la URL.
- [ ] Con `SKATERSHOP_SALES_URL_POST=...` ‚Üí debe verse la URL de POST.

---

## 3. [ADMIN-EXPORT] Probar exportaci√≥n con datos remotos (asocia: T5, T7)
**Objetivo:** Confirmar que el panel de exportaciones (`<AdminExportPanel />`) tambi√©n funciona cuando la API est√° sirviendo datos desde la fuente externa.  
**Archivos:**  
- `/components/admin/AdminExportPanel.tsx`  
- `/app/admin/page.tsx`  

**Checklist:**
- [ ] Poner mock remoto de productos ‚Üí exportar ‚Üí debe descargar CSV con esos productos.
- [ ] Poner mock remoto de ventas ‚Üí exportar ‚Üí debe descargar CSV con esas ventas.
- [ ] Quitar mock remoto ‚Üí debe exportar lo de memoria.

---

## 4. [ADMIN-QA] Pruebas de regresi√≥n r√°pidas (asocia: T1‚ÄìT7)
**Objetivo:** Asegurar que los √∫ltimos cambios de API flexible no rompieron el flujo base del admin.  
**Pasos:**
1. [ ] Entrar a `/admin/products` ‚Üí debe listar algo (API o local).
2. [ ] Borrar un producto que **no** tenga ventas ‚Üí debe borrarse en UI.
3. [ ] Crear una venta de prueba ‚Üí debe bajar stock.
4. [ ] Volver a `/admin/products` ‚Üí debe reflejar el nuevo stock.
5. [ ] Ir a `/admin` ‚Üí totales deben coincidir.

---

## 5. [DOCS] Actualizar README admin (asocia: docs)
**Objetivo:** Documentar c√≥mo se configuran las 3 variables de entorno de admin.  
**Contenido m√≠nimo:**
- `SKATERSHOP_PRODUCTS_URL`
- `SKATERSHOP_SALES_URL`
- `SKATERSHOP_SALES_URL_POST`
- Ejemplo de `.env.local`

**Estado:** üü• Pendiente
